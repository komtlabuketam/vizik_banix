{"id": 15, "style": "Spectrum", "contentVariable": "#define CEL 64.\n#define barSize 1.0 / CEL\n#define sampleSize 0.2\n#define R iResolution.xy\n#define TWO_PI (acos(-1.) * 2.)", "contentFunction": "mediump vec3 palette( in mediump float t, in mediump vec3 a, in mediump vec3 b, in mediump vec3 c, in mediump vec3 d ){\n    return a + b*cos( 6.28318*(c*t+d) );\n}", "contentVisualizer": "uv = (gl_FragCoord.xy -.5 * R)/R.x;\n    mediump vec2 uv2  = 1. - 2. * gl_FragCoord.xy / R;\n    mediump vec2 st = uv;\n    mediump float a = TWO_PI / 8. * cos(length(st)) * 20.;\n    uv *= mat2(cos(a), -sin(a), sin(a), cos(a));\n    mediump vec2 pol = vec2(atan(uv.x, uv.y), length(uv));\n    mediump float alfa = pol.x / TWO_PI + .5;\n\n    uv = vec2(alfa , pol.y);\n\n    // SPECTRUM\n    mediump float barStart = floor(uv.x * CEL) / CEL;\n    mediump float amp = .0;\n    amp -= texture2D(iChannel0,vec2(400.,0.),0.).x;\n\n    mediump float intensity = .0;\n\n    for(mediump float i = 0.0; i < barSize; i += barSize * sampleSize){\n        intensity += .9 * texture2D(iChannel0, vec2(barStart + i, 0.)).r;\n    }\n\n    intensity *= sampleSize;\n    intensity  = clamp(intensity + .1, 0.29, 1.);\n    mediump float height  = smoothstep(.0,.005, intensity - uv.y * 3.);\n\n    mediump vec3 pal = palette(intensity -.2,\n    vec3(.5, .5, .0),\n    vec3(.5,.5,.35),\n    vec3(.9,.5,.3),\n    vec3(vec2(intensity * length(uv) + uv.y), 1.));\n\n    mediump vec4 spectrum =  vec4(clamp(pal, .0,1.) * height, 1.);\n    mediump float lines  = smoothstep(.2, .4, .85*length(fract(uv.x * CEL)-.5));\n    mediump float center = 1.- smoothstep(.09, .091, length(st));\n    mediump float c0     = 1.- smoothstep(.082, .083, length(st));\n    mediump vec4 bg = vec4(.0,.0,.0, 1.);\n    bg      += .23 * smoothstep(.03,.0,length(st));\n    mediump float lns = smoothstep(.5,.51,length(fract(pol.y*250.)));\n    bg -= length(pol.y*.1) * lns;\n    bg += .05 * length( (st.y + .08)* 30.) * c0;\n    mediump vec4 col = min(vec4(spectrum),vec4(spectrum) - (lines + center)) ;\n    col = mix( clamp(bg, .0,1.), clamp(3. * col, .0,1.), 1.);\n    visualizer = col.rgb;"}